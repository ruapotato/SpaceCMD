#!/usr/bin/pooscript
# Assign crew to rooms - hackable crew management

if len(args) < 2:
    error("Usage: assign <crew_member> <room>")
    error("Example: assign hayes weapons")
    exit(1)

crew_name = args[0]
room_name = args[1]

# Find matching crew member
crew_list = vfs.list("/crew")
crew_match = None

for crew in crew_list:
    if crew in [".", ".."]:
        continue
    if crew_name.lower() in crew.lower():
        crew_match = crew
        break

if not crew_match:
    error(f"Crew member not found: {crew_name}")
    error(f"Available crew: {' '.join([c for c in crew_list if c not in ['.', '..']])}")
    exit(1)

# Find matching room
rooms_list = vfs.list("/rooms")
room_match = None

for room in rooms_list:
    if room in [".", ".."]:
        continue
    if room_name.lower() in room.lower():
        room_match = room
        break

if not room_match:
    error(f"Room not found: {room_name}")
    error(f"Available rooms: {' '.join([r for r in rooms_list if r not in ['.', '..']])}")
    exit(1)

# TODO: Implement crew assignment via kernel syscall
# For now, just report what would happen
print(f"Moving {crew_match.replace('_', ' ').title()} to {room_match.replace('_', ' ')}")
print("(Crew assignment not yet implemented via kernel)")
