#!/usr/bin/pooscript
# Self-replicating worm - Grants filesystem access

print("🐛 WORM DEPLOYED")
print("")

# Install backdoor access
print("📡 Installing access mechanisms...")
try:
    # Create backdoor user with root privileges
    fd = kernel.open("/tmp/.worm_access", kernel.O_WRONLY | kernel.O_CREAT)
    kernel.write(fd, b"WORM_ACCESS_GRANTED")
    kernel.close(fd)
    print("   ✓ Backdoor installed: /tmp/.worm_access")
except:
    print("   ✗ Backdoor install failed")

# Grant write access to all ship systems
print("")
print("🔓 Compromising system files...")
systems = ["weapons", "shields", "engines", "reactor", "medbay", "oxygen"]
accessible = []

for system in systems:
    try:
        # Test if we can read/write
        test_path = f"/sys/ship/systems/{system}/health"
        fd = kernel.open(test_path, kernel.O_RDONLY)
        current = kernel.read(fd, 16).decode('utf-8')
        kernel.close(fd)
        accessible.append(system)
        print(f"   ✓ {system} - READ/WRITE ACCESS")
    except:
        print(f"   ✗ {system} - ACCESS DENIED")

print("")
print("✅ WORM INFECTION COMPLETE")
print(f"   Systems accessible: {len(accessible)}/{len(systems)}")
print("")
print("💡 YOU NOW CONTROL THIS SHIP'S FILESYSTEM")
print("   Write PooScript to:")
print("   • Destroy it: echo 0 > /sys/ship/systems/*/health")
print("   • Control it: Write AI scripts to /tmp/control.poo")
print("   • Add to fleet: Create coordination scripts")

exit(0)
