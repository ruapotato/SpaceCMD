#!/usr/bin/pooscript
# VIRUS - Spreads and grants access to all systems

print("ðŸ¦  VIRUS INFECTION STARTING")
print("")

# Spread to all systems and establish access
systems = ["weapons", "shields", "engines", "reactor", "medbay", "oxygen", "sensors", "doors"]

print("ðŸ“¡ Spreading through ship's network...")
infected = []

for system in systems:
    try:
        # Check if system exists
        health_path = f"/sys/ship/systems/{system}/health"
        fd = kernel.open(health_path, kernel.O_RDONLY)
        kernel.close(fd)

        # Mark as infected (grant access)
        access_file = f"/tmp/.virus_{system}"
        fd = kernel.open(access_file, kernel.O_WRONLY | kernel.O_CREAT)
        kernel.write(fd, b"ACCESS_GRANTED")
        kernel.close(fd)

        infected.append(system)
        print(f"   ðŸ¦  {system} - INFECTED (access granted)")
    except:
        print(f"   âœ— {system} - not found")

print("")
print("âœ… VIRUS INFECTION COMPLETE")
print(f"   {len(infected)} systems compromised")
print("")
print("ðŸ’¡ ALL SYSTEMS NOW ACCESSIBLE")
print("   You can read/write any system file!")
print("")
print("Examples:")
print("   # Read all system status")
print("   cat /proc/ship/status")
print("")
print("   # Control weapons remotely")
print("   echo 4 > /sys/ship/systems/weapons/power")
print("")
print("   # Deploy AI to auto-fight for you")
print("   pooscript /scripts/ai/auto_combat.poo")

exit(0)
